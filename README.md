## 项目概述

​		本项目基于全国大学生电子设计大赛(NUEDC)，该系统以STM32F407VET6作为核心板，由OpenMV模块、循迹检测模块、蜂鸣器模块和前轮转向式四轮车构成。该自动泊车系统的设计采用了模块化思想，完成了色块识别模块及自动泊车模块的设计，达到集中检测车库、自动泊车于一体的目的，实现了自动泊车功能。

​		系统运用色块识别方法以及自动泊车模块完成自动泊车功能。色块识别方法是对摄像头采集的图像中的感兴趣区域（ROI）中的黑色像素数进行检测和统计，当像素数大于设定的阈值，发送高电平信号，标志检测完成；自动泊车模块是利用STM32的定时器输出PWM波控制电机速度以及舵机旋转角度，通过编码器，红外传感器确定小车运行轨迹，当车身进入车库内通过循迹避障模块检测地面库线，待小车全部进入车库内，最终实现自动泊车功能。

## 文件结构

```
Ti_Cup_NUEDC-2022-10-B/
│
├── NUEDC-2022-10-B赛题/         # 存放电子设计大赛比赛题目
│   └── B题-具有自动泊车功能的电动车赛题.pdf
│
├── Openmv_code/           	    # 存放openmv视觉识别py代码
│   └── Openmv_Color_Block_Recognition_Code.py
│
├── stm32_project/             	# 存放STM32工程文件				
│   ├── CORE/   # 存放STM32内核寄存器定义映射，启动文件等文件	
│   ├── FWLIB/  # 固件库文件
│	│   ├── inc		# 固件库头文件
│	│   └── src		# 固件库源文件
│   ├── OBJ		# 存放目标文件
│   ├── SYSTEM	# 模块驱动文件
│	│   ├── BEER		# 蜂鸣器模块驱动文件
│	│   ├── delay		# 延时模块驱动文件
│	│   ├── Encoder		# 电机编码器模块驱动文件
│	│   ├── KEY			# 独立按键模块驱动文件
│	│   ├── LED			# LED控制模块驱动文件
│	│   ├── MPU6050		# 6050模块驱动文件
│	│   ├── oled		# oled显示器模块驱动文件
│	│   ├── PWM			# pwm输出控制驱动文件
│	│   ├── sensor		# 红外传感器模块驱动文件
│	│   ├── Speed		# 电机模块驱动文件
│	│   ├── STE			# 舵机模块驱动文件
│	│   ├── TIMER		# 定时器驱动文件
│	│   ├── usart		# 串口驱动文件
│	│   └── sys			# 位带操作文件
│   └── USER	# debug	keil相关文件
│
├── SCH/                       # 电路原理图.pdf
│   └── 具有自动泊车功能的电动车SCH.pdf
│
├── 赛题报告/                   # 赛题报告文件
│   ├── 具有自动泊车功能的电动车_赛题报告.docx    
│   └── 具有自动泊车功能的电动车_赛题报告.pdf
│
├── 入库流程图.docx             # 侧方位停车，倒车入库过程图
│
└── README.md                 # 本文档，提供有关问题描述、解决思路以及文件结构等信息
```



## 系统总体设计

## STM32c语言程序设计		

​		本系统以STM32F407作为核心处理器，主要由OpenMV模块、循迹检测模块、蜂鸣器模块、直流电机、舵机等部分构成。该系统总体设计图以及系统设计清单如下图所示：                       



<div align=center><img  src ="https://github.com/zihaonian/Ti_Cup_NUEDC-2022-10-B/blob/main/res/Schematic diagram of module composition.png"/></div>

